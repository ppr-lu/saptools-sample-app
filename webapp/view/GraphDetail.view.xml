<mvc:View xmlns:html="http://www.w3.org/1999/xhtml" 
xmlns="sap.m" xmlns:chart="sap.suite.ui.commons"
xmlns:viz="sap.viz.ui5.controls" xmlns:layout="sap.ui.layout"
xmlns:mvc="sap.ui.core.mvc" xmlns:viz.feeds="sap.viz.ui5.controls.common.feeds"
xmlns:core="sap.ui.core" xmlns:viz.data="sap.viz.ui5.data"
controllerName="simple-app.controller.GraphMaster">
	<App>
		<pages>
			<Page title="{i18n>GraphMasterPageTitle}" enableScrolling="true" showNavButton="true" navButtonPress="onNavBack">
				<content>
                    <VBox>
				        <Text text="Simple app" />
                        <Button text="SOAP" press="onRetrieveGraphData"/>
                    </VBox>




                    <chart:ChartContainer  showFullScreen="true" showZoom="false" title="Ice-Cream-Report">
                        <chart:ChartContainerContent>
                            <chart:content>
                                <viz:Popover ></viz:Popover>
                                <viz:VizFrame  id="vizFrame1" width="auto"
                                    uiConfig="{applicationSet:'fiori'}" vizType="timeseries_line"
                                    vizProperties="{
                                        plotArea:{
                                                    dataLabel:{visible: true}
                                        },
                                        title : {text:'Flavor-Sales'}
                                    }"
                                    selectData="myOnClickHandler" 
                                    noDataText="Go make a Sale!"
                                    renderComplete="handleRenderComplete"
                                >
                                    <viz:dataset>
                                    <viz.data:FlattenedDataset  data="{modmastergraph>/TITULOS/TITULO/VARIABLES/VARIABLE/PUNTOS/puntos/}">
                                        <viz.data:dimensions>
                                            <viz.data:DimensionDefinition name="Date" value="{modmastergraph>FECHA_TAG}" dataType="date"/>
                                        </viz.data:dimensions>
                                        <viz.data:measures>
                                            <viz.data:MeasureDefinition name="Sales" value="{modmastergraph>VALOR}" />
                                        </viz.data:measures>
                                    </viz.data:FlattenedDataset>
                                    </viz:dataset>
                                        
                                    <viz:feeds>
                                        <viz.feeds:FeedItem uid="valueAxis" type="Measure" values="Sales" />
                                        <!-- <viz.feeds:FeedItem uid="categoryAxis" type="Dimension" values="Date" /> -->
                                        <viz.feeds:FeedItem uid="timeAxis" type="Dimension" values="Date" />
                                    </viz:feeds>
                                </viz:VizFrame>

                            </chart:content>
                        </chart:ChartContainerContent>
                    </chart:ChartContainer>









                    <layout:FixFlex id='chartFixFlex2' minFlexSize="250">
                        <layout:fixContent>
                            <Panel id='settingsPanel2' class="panelStyle" expandable="true" expanded="true" headerText="Settings" width="auto">
                                <content>
                                    <HBox class='settingsHBox'>
                                    <VBox width="200px">
                                        <Label text = 'Grafica Prueba' design="Bold" class='settingsLabel'></Label>
                                        <Select id='chartTypeSelect' class='settingsSelect' selectedKey='{/chartType/defaultSelected}' maxWidth="150px" change='onChartTypeChanged' 
                                            items="{path: '/chartType/values'}">
                                            <items>
                                                <core:Item text="{name}" key="{key}" />
                                            </items>
                                        </Select>
                                    </VBox>
                                    </HBox>
                                </content>
                            </Panel>
                        </layout:fixContent>
                        <layout:flexContent>
                            <viz:Popover ></viz:Popover>
                            <viz:VizFrame id="vizFrame2"  uiConfig="{applicationSet:'fiori'}"
                                height='100%' width="100%" vizType='timeseries_line'
                                vizProperties="{
                                        plotArea:{
                                                    dataLabel:{visible: true}
                                        },
                                        valueAxis: {
                                            label: {
                                                formatString: '.formatPattern.SHORTFLOAT'
                                            }
                                        },
                                        title : {text:'Flavor-Sales'}
                                    }">
                                <viz:dataset>
                                    <viz.data:FlattenedDataset data="{modmastergraph>/TITULOS/TITULO/VARIABLES/VARIABLE/PUNTOS/puntos/}">
                                        <viz.data:dimensions>
                                            <viz.data:DimensionDefinition name="Date"
                                                value="{FECHA_TAG}" dataType="date"/>
                                        </viz.data:dimensions>
                                        <viz.data:measures>
                                            <viz.data:MeasureDefinition name="Revenue"
                                                value="{VALOR}" />
                                        </viz.data:measures>
                                    </viz.data:FlattenedDataset>
                                </viz:dataset>

                                <viz:feeds>
                                    <viz.feeds:FeedItem uid="valueAxis" type="Measure"
                                        values="Revenue" />
                                    <viz.feeds:FeedItem uid="timeAxis" type="Dimension"
                                        values="Date" />
                                </viz:feeds>
                            </viz:VizFrame>
                        </layout:flexContent>
                    </layout:FixFlex>


                    <!-- <Title text="Ordenes Mezcla" level="H2"/> -->
				</content>
			</Page>
		</pages>
	</App>
</mvc:View>